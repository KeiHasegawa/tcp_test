このプログラムを Windows 10 で動作させた.

int soc = socket(...);

bind(soc, ...);

listen(soc, ...);

listen の呼び出しで

このアプリの機能のいくつかが
Windows DEfender ファイアウォール
でブロックされています

というダイアログボックスが表示される.

「アクセスを許可する」を押した.

次に実行したときに listen が成功するのかと思ったがやはり負の値が
返っている.

しかし, linux で動作させて再び Windows で動作させてみたところ
accept は成功している. 何か変更したのだろうけども覚えていない.

間違えていた勘違いしていたのは read や write は accept の戻り値を
ファイルでスクリプタとして指定するのが正しい. socket の戻り値を使用していた.

htons や htonl を使用すると実は期待通り動作していない.
バイトオーダーを変更しないほうが実は期待通り動作している.

-> pure-ftpd を動作させてみたところ

bind の第二引数
bind(listenfd, res->ai_addr, ...)
では

p/x *(struct sockaddr_in*)res->ai_addr
$7 = {sin_family = 0x2, sin_port = 0x1500, sin_addr = {s_addr = 0x0},
  sin_zero = {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0}}

のようになっていて, 0x15 = 21 だからやはり, 反転している
